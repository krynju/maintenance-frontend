<mat-card>
  <mat-card-content>
    <mat-card-header fxLayout="row" fxLayoutAlign="flex-start baseline">
      <h1 fxFlex>
        Ticket
      </h1>
    </mat-card-header>

    <div *ngIf="ticket && machines && failures">
      <mat-form-field>
        <input [(ngModel)]="ticket.name" matInput placeholder="Nazwa" required>
      </mat-form-field>

      <mat-form-field>
        <textarea [(ngModel)]="ticket.description" matInput placeholder="Opis"></textarea>
      </mat-form-field>

      <mat-form-field>
        <mat-select [(ngModel)]="ticket.priority" name="Priorytet" placeholder="Status">
          <mat-option value="niski">Niski</mat-option>
          <mat-option value="normalny">Normalny</mat-option>
          <mat-option value="wysoki">Wysoki</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <input [ngModel]="formatTime(ticket.created)" disabled matInput placeholder="Czas utworzenia">
      </mat-form-field>

      <mat-form-field>
        <input [ngModel]="formatTime(ticket.closed)" disabled matInput placeholder="Czas zamknięcia">
      </mat-form-field>

      <mat-form-field>
        <mat-select [(ngModel)]="ticket.status" name="food" placeholder="Status">
          <mat-option value="w trakcie realizacji">W trakcie realizacji</mat-option>
          <mat-option value="oczekuje na realizacje">Oczekuje na realizacje</mat-option>
          <mat-option value="zakończone">Zakończone</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-select [(ngModel)]="ticket.machine" name="Obiekt" placeholder="Obiekt">
          <mat-option *ngFor="let machine of machines" [value]="machine.id">
            {{machine.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-select [(ngModel)]="ticket.failure" name="food" placeholder="Awaria">
          <mat-option *ngFor="let failure of failures" [value]="failure.id">
            {{failure.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <button (click)="save()" [disabled]="saveTimeout" mat-raised-button color="primary">Zapisz</button>
    </div>
    <div *ngIf="!ticket || !machines || !failures">
      Loading, please wait...
    </div>

  </mat-card-content>
</mat-card>
